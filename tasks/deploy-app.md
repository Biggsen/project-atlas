# Deploy App

## Overview
Deploy Project Atlas dashboard to a hosting service for public/private access.

## Dependencies

**⚠️ Prerequisite**: The Refresh API feature must be implemented first (see `spec/refresh-api-spec.md`). This adds a backend API server that requires specific hosting platform capabilities.

## Requirements

### Platform Requirements (Due to Refresh API)
- **Must support Node.js runtime** (not static-only hosting)
- **Must support file system writes** (for aggregation output)
- **Options**: Vercel (serverless functions), Netlify Functions, Railway, Render, Fly.io
- **Cannot use**: GitHub Pages (static-only)

### Configuration Requirements
- Configure build process for both frontend and backend
- Set up data file serving (ensure `data/projects/` files are accessible)
- Configure environment variables:
  - `GITHUB_TOKEN` (required for backend API)
  - API endpoint URL (if frontend/backend separate)
- Set up CORS if frontend/backend on different domains
- Configure deployment pipeline

## Architecture Options

### Option 1: Monorepo Deployment (Recommended)
- Deploy frontend and backend together on same platform
- Backend serves API and static frontend files
- Single deployment, simpler CORS, unified logging

### Option 2: Separate Deployments
- Frontend: Static hosting (Vercel, Netlify)
- Backend: Serverless functions or separate service
- Requires CORS configuration
- More flexible but more complex

## Considerations
- Dashboard is a Svelte app that reads JSON files from `/projects/`
- Backend API server needs to run aggregation and copy files
- Refresh API allows on-demand data updates via frontend button
- Data files are generated by aggregator and served to frontend
- Need to ensure `data/projects/` → `dashboard/public/projects/` copy happens after aggregation

## Steps
1. **Implement Refresh API** (see `spec/refresh-api-spec.md`)
2. Choose hosting platform (must support Node.js)
3. Configure build settings for both frontend and backend
4. Set up environment variables (`GITHUB_TOKEN`)
5. Configure CORS if needed
6. Set up data file serving/copying
7. Deploy initial version
8. Test Refresh API endpoint
9. Test frontend refresh button
10. Document deployment process
11. Set up monitoring/logging

## Post-Deployment
- Verify Refresh API works in production
- Test data file updates
- Monitor aggregation performance
- Set up error alerting if needed

